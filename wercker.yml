box: debian
build:
    steps:
        - arjen/hugo-build
deploy:
    steps:
        - install-packages:
            packages: git ssh-client
        - lukevivier/gh-pages:
            token: $GITHUB_TOKEN
            domain: visnz.github.io
            basedir: public
            repo: visnz/visnz.github.io
deploy-gitea:
    steps:
        - install-packages:
            packages: openssh-client
        - add-to-known_hosts:
            hostname: $HOSTNAME
        - mktemp:
            envvar: $PRIVATEKEY_PATH
        - create-file:
            name: write key
            filename: $PRIVATEKEY_PATH
            content: $Deploy_to_Guediao_PRIVATE
            overwrite: true
        - deogracia/scp-deploy:
            host: $HOSTNAME
            destination: $DEPLOY_PATH
            user: $DEPLOY_USER
            sshprivatekey: $PRIVATEKEY_FILE
